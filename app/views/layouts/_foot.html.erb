<script>

    // Header fade out
    $(document).ready(function () {

        $('#sidebar').affix({
            offset: {
                top: 230,
                bottom: 100
            }
        });
        $('#midCol').affix({
            offset: {
                top: 230,
                bottom: 100
            }
        });

    });

    // Fixed height of left & right
    window.onload = window.onresize = function () {
        if (document.getElementById("maincontent").clientHeight < document.getElementById("sidecontent").clientHeight) {
            document.getElementById("sidecontent").style.maxHeight = document.getElementById("maincontent").offsetHeight + "px";
        }
        else {
            document.getElementById("sidecontent").style.maxHeight = document.getElementById("maincontent").offsetHeight + "px";
        }
    }


    // Go up
    $(document).ready(function () {
        $('#goup').goup({
            appear: 200,
            scrolltime: 800,
            imgsrc: 'http://goo.gl/VDOdQc',
            width: 32,
            place: 'bottom-right',
            fadein: 500,
            fadeout: 500,
            opacity: 0.5,
            marginX: 0.7,
            marginY: 1
        });

    });


    $("#index").popover();
    $("#news").popover();
    $("#notis").popover();
    $("#download").popover();
    $("#faq").popover();
    $("#slmember").popover();


    var datepickerSelector = '#datepicker';
    $(datepickerSelector).datepicker({
        showOtherMonths: true,
        selectOtherMonths: true,
        dateFormat: "d MM, yy",
        yearRange: '-1:+1'
    }).prev('.btn').on('click', function (e) {
                e && e.preventDefault();
                $(datepickerSelector).focus();
            });

    // Change to false if wanna enable select
    $(datepickerSelector).datepicker("option", "disabled", true ).css({'margin-left': -$(datepickerSelector).prev('.btn').outerWidth()});


    $(document).ready(function(){
        // 初始化
        LxA.init();
        // 初始化弹幕播放器，最多显示256条
        LxA.initDmPlayer(256);
        // 设置显示弹幕
        LxA.dmplay = true;
        // 测试

    });
    function 弹幕测试(n){
        n = n || 1;
        LxS.dm('弹幕测试第' + n + '条');
        setTimeout(function(){
            弹幕测试(n + 1);
        }, 100);
    }
    function 菜单测试(){
        var p = LxS.popup(
                [
                    {
                        'text'  : '菜单项1',
                        'click' : function(){
                            LxS.alert('菜单项1');
                        }
                    },
                    {
                        'text'  : '菜单项2',
                        'click' : function(){
                            LxS.alert('菜单项2');
                        }
                    }
                ]
        );
        p.pop();
    }





    $(document).ready(function() {
        if($("#pagination")){
            var pagecount = 5;
            var pagesize = 2;
            var currentpage = 1;
            var counts,pagehtml="";
            if(pagecount%pagesize==0){
                counts = parseInt(pagecount/pagesize);
            }else{
                counts = parseInt(pagecount/pagesize)+1;
            }
            //只有一页内容
            if(pagecount<=pagesize){pagehtml="";}
            //大于一页内容
            if(pagecount>pagesize){
                if(currentpage>1){
                    pagehtml+= '<li><a href="/course/index/'+(currentpage-1)+'">上一页</a></li>';
                }
                for(var i=0;i<counts;i++){
                    if(i>=(currentpage-3) && i<(currentpage+3)){
                        if(i==currentpage-1){
                            pagehtml+= '<li class="active"><a href="/course/index/'+(i+1)+'">'+(i+1)+'</a></li>';
                        }else{
                            pagehtml+= '<li><a href="/course/index/'+(i+1)+'">'+(i+1)+'</a></li>';
                        }

                    }
                }
                if(currentpage<counts){
                    pagehtml+= '<li><a href="/course/index/'+(currentpage+1)+'">下一页</a></li>';
                }
            }
            $("#pagination").html(pagehtml);
        }
    });


</script>